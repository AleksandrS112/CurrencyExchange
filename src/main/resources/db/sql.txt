CREATE TABLE currencies
(
    id        SERIAL PRIMARY KEY,
    code      VARCHAR(3)   NOT NULL UNIQUE,
    full_name VARCHAR(255) NOT NULL,
    sign      VARCHAR(3) NOT NULL
);
CREATE INDEX on currencies (full_name);
CREATE INDEX on currencies (sign);

CREATE TABLE exchange_rates
(
    id                 SERIAL PRIMARY KEY,
    base_currency_id   INT REFERENCES currencies (id) NOT NULL ,
    target_currency_id INT REFERENCES currencies (id) NOT NULL ,
    rate               DECIMAL(6) NOT NULL,
    UNIQUE (base_currency_id, target_currency_id),
    CHECK (base_currency_id != target_currency_id)
)